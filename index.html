
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>A Windows</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: white;
      }
    </style>
  </head>

  <body>
    <div id="container"></div>
  </body>
</html>

<script src="https://unpkg.com/konva@8.3.2/konva.min.js"></script>
<script>
  var width = window.innerWidth;
  var height = window.innerHeight;

  var stage = new Konva.Stage({
    container: 'container',
    width: width,
    height: height,
  });

  var layer = new Konva.Layer();
  stage.add(layer);

  function createShape(width, height) {
    //create group
    var group = new Konva.Group({
      x: Math.random() * width,
      y: Math.random() * height,
      draggable: true,
    });
    //add shape into group
    var shape = new Konva.Rect({
      width: width,
      height: height,
      fill: '#4898F7',
      name: 'fillShape',
    });
    group.add(shape);

    //add bounding
    var boundingBox = shape.getClientRect({ relativeTo: group });

    var box = new Konva.Rect({
      x: boundingBox.x,
      y: boundingBox.y,
      width: boundingBox.width,
      height: boundingBox.height,
      stroke: '#01387D',
      strokeWidth: 10,
    });
    group.add(box);
    return group;
  }

    layer.add(createShape(200, 400));
    layer.add(createShape(200, 400));
    layer.add(createShape(410, 200));

  layer.on('dragmove', function (e) {
    var target = e.target;
    var targetRect = e.target.getClientRect();
    layer.children.forEach(function (group) {
      // do not check intersection with itself
      if (group === target) {
        return;
      }
      if (haveIntersection(group.getClientRect(), targetRect)) {
        group.findOne('.fillShape').fill('red');
      } else {
        group.findOne('.fillShape').fill('#4898F7');
      }
    });
  });

  function haveIntersection(r1, r2) {
    return !(
      r2.x > r1.x + r1.width ||
      r2.x + r2.width < r1.x ||
      r2.y > r1.y + r1.height ||
      r2.y + r2.height < r1.y
    );
  }
</script>
